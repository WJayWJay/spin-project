{"version":3,"sources":["util/util.js","util/animation.js","components/Spin.js","App.js","index.js"],"names":["now","performance","Date","defaltCal","start","from","range","dura","animation","option","options","Object","assign","duration","easing","calVal","callback","req","during","Math","ceil","to","tick","value","getProgress","window","requestAnimationFrame","cancelRaf","cancelAnimationFrame","resume","increaseFn","k","type","s","index","base","arguments","length","undefined","P","PI","ap","cos","g","Main","state","pointers","Array","fill","current","direction","size","pointTo","e","_this","console","log","pointer","transformTo","_this$state","baseDeg","deg","abs","style","concat","all","dotInst","querySelectorAll","i","aType","reverse","runReverse","arr","end","v","isEnd","run","setState","raf","fn","realPointers","ref","dotCon","change","val","target","parseFloat","isNaN","mouseWheel","select","toRem","html","document","firstElementChild","w","innerWidth","outerWidth","tagName","getComputedStyle","htmlStyle","fontSize","this","wheel","id","timeout","only","cur","n","args","slice","apply","clearTimeout","setTimeout","throttle","_this2","_this$state2","rsize","react_default","a","createElement","className","key","placeholder","onChange","marginTop","onWheel","dy","nativeEvent","deltaY","height","width","map","j","onClick","bind","transform","classnames","dot","big-dot","highlight-dot","React","Component","App","components_Spin","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.7959c5de.chunk.js","sourcesContent":["\nconst now = () => performance ? performance.now() : Date.now()\nexport function throttle(fn, timeout = 1000, only = true) {\n\n    var cur = now();\n    var id;\n\n    return function() {\n        var n = now();\n        var args = [].slice.apply(arguments)\n        if (id) {\n            clearTimeout(id);\n        }\n        if ((n - cur) > timeout && !only) {\n            fn && fn.apply(null, args);\n            cur = now();\n        } else {\n            id = setTimeout(() => {\n                fn && fn.apply(null, args);\n                id = 0;\n                cur = now();\n            }, timeout)\n        }\n    }\n}\n\n","\nfunction defaltCal(start, from , range, dura) {\n\n    return range * start / dura + from;\n}\n\n/**\n * {from, to, duration, callback, calVal: defaltCal}\n * @param {number} option.from\n * @param {number} option.to\n * @param {number} option.duration\n * @param {Function} option.callback\n * @param {Function} option.calVal\n */\nexport function animation (\n    option\n) {\n    \n    var options = Object.assign({\n        duration: 300,\n        easing: 'Linear',\n        calVal: defaltCal,\n        callback: function() {}\n    }, option || {});\n    \n    var calVal = options.calVal;\n    var start = 0;\n    var req = null;\n    var during = Math.ceil(options.duration / 17);\n\n    var from = options.from;\n    var to = options.to;\n\n\n    const getProgress = (start, from , range, dura) => {\n        if (calVal) {\n            return calVal(start, from , range, dura);\n        }\n        return range * start / dura + from;\n    };\n\n    const tick = function() {\n        var value = getProgress(start, from, to - from, during);\n        start++;\n        if (start <= during) {\n            options.callback(value);\n            req = window.requestAnimationFrame(tick);\n        } else {\n            options.callback(to, true);\n        }\n    }\n    const cancelRaf = () => {\n        window.cancelAnimationFrame(req);\n    }\n    const resume = () => {\n        tick();\n    }\n\n    tick();\n\n    return () => ({\n        req,\n        cancelRaf,\n        resume\n    });\n}\n\n\nexport function increaseFn(k, type) {\n    var s = 0;\n    switch(type) {\n        case 'ease-in-out':\n            s = g(k, 2);\n            break;\n        case 'ease-in':\n            s = k * 0.2;\n            break;\n        default: \n            s = 0;\n    }\n\n    return s;\n\n    function g(index, base = 4) {\n        var P = Math.PI;\n        var ap = P / 8;\n        var d = Math.cos(ap * index - P/2) * base;\n        return d;\n    }\n}","import React from 'react';\n\nimport './Spin.css';\n\nimport classnames from 'classnames';\nimport { throttle } from '../util/util';\nimport { animation, increaseFn } from '../util/animation';\n\nclass Main extends React.Component {\n    state = {\n        pointers: new Array(72).fill(0),\n        current: 0,\n        direction: 1,\n        size: 500,\n        type: 'ease-in-out'\n    };\n    pointTo = (index, e) => {\n        const {current} = this.state;\n        console.log(index, current)\n        if (index % 9 !== 0 || !this.pointer) return;\n        if (current === index) return;\n        \n        this.transformTo(index);\n    }\n\n    transformTo = (index) => {\n        const {pointers, current} = this.state;\n\n        const baseDeg = (360 / pointers.length);\n\n        \n        const deg = Math.abs(baseDeg * (index));\n        this.pointer.style = `transform: rotateZ(${deg}deg)`;\n\n        \n        var all = this.dotInst.querySelectorAll('.dot-content');\n        var i = current+ 1;\n        const aType = this.state.type;\n\n        var dura = Math.abs(1000 / ((index - current) / 9))\n        var reverse = current > index;\n        console.log('--------', current, index, reverse)\n\n        if (reverse) {\n            runReverse(all, current - 1, index, dura);\n        } else {\n            run(all, i, index, dura);\n        }\n\n        function runReverse(arr, start, end, duration) {\n            var k = 8;\n            var i = start;\n\n            if (start > end) {\n                while (k > 0) {\n                    (0, (i, k) => \n                    {\n                        var from = 1 + increaseFn(k, aType);\n                        var to = 1;\n                        animation({\n                            from, to, duration, \n                            callback: (v, isEnd) => {\n                                arr[i].style= `transform: scale(${v})`;\n                                if (isEnd && k === 1) {\n                                    runReverse(arr, start - 9, end, duration);\n                                }\n                            }\n                        });\n                    })(i, k);\n                    i--;\n                    k--;\n                }\n            }\n        }\n\n\n        function run(arr, start, end, duration) {\n            var k = 1;\n            var i = start;\n            if (start < end) {\n                while (k < 9) {\n                    (0, (i, k) => \n                    {\n                        var to = 1 + increaseFn(k, aType);\n                        var from = 1;\n\n                        animation({\n                            from, to, duration, \n                            callback: (v, isEnd) => {\n                                arr[i].style= `transform: scale(${v})`;\n                                if (isEnd && k === 8) {\n                                    run(arr, start + 9, end, duration);\n                                }\n                            }\n                        })\n                    })(i, k);\n                    i++;\n                    k++;\n                }\n            }\n        }\n\n        this.setState({current: index});\n    }\n\n    \n\n    raf = (fn) => fn && window.requestAnimationFrame(fn);\n\n    realPointers = (ref) => {\n        this.pointer = ref;\n    }\n    dotCon = (ref) => {\n        this.dotInst = ref;\n    }\n    change = (e) => {\n        var val = e.target.value;\n        val = parseFloat(val)\n        if (isNaN(val)) return\n\n        this.setState({\n            size: val >= 100 ? val : 100\n        })\n    }\n\n    mouseWheel = (e) => {\n        const {current} = this.state;\n        // const dy = e && e.nativeEvent && e.nativeEvent.deltaY;\n        const dy = e;\n        if (dy) {\n            let index = current;\n            if (dy < 0) {\n                // up\n                index -= 9;\n                index = index < 0 ? 72 + index : index\n            } else {\n                // down\n                index += 9;\n                index = index > 72 ? index - 72 : index\n            }\n            this.transformTo(index);\n        }\n    }\n\n    select = (e) => {\n        var val = e.target.value;\n        this.setState({\n            type: val\n        })\n    }\n\n    toRem = (val) => {\n        var html = document.firstElementChild;\n        var size = val + 'px';\n        var w = window.innerWidth || window.outerWidth;\n        if (html && html.tagName === 'HTML' && window.getComputedStyle) {\n            var htmlStyle = window.getComputedStyle(html);\n            var fs = parseFloat(htmlStyle.fontSize);\n            if (val > w - 20) val = w - 20;\n            size = val / fs + 'rem';\n            \n        }\n        return size;\n    }\n\n    componentDidMount() {\n        this.wheel = throttle(this.mouseWheel, 50);\n    }\n\n    render() {\n        const {pointers, size, current} = this.state;\n        const baseDeg = (360 / pointers.length);\n\n        var rsize = this.toRem(size);\n\n        return (\n            <div className=\"container\">\n                <span>size: </span><input key={'input'} placeholder={size} onChange={this.change} />\n                <span>animation: </span><select onChange={this.select}>\n                    <option value=\"ease-in-out\">ease-in-out</option>\n                    <option value=\"ease-in\">ease-in</option>\n                </select>\n                <div key={'spin'} style={{marginTop: 20}} className=\"flex flex-align spin-container\">\n                    <div\n                        onWheel={(e) => {\n                            var dy = e && e.nativeEvent && e.nativeEvent.deltaY;\n                            this.wheel(dy)\n                        }}\n                        style={{height: rsize, width: rsize}} \n                        className=\"spin\">\n                        <div key={1} className=\"spin-center\"></div>\n                        <div key={2} className=\"spin-pointer\">\n                            <div ref={this.realPointers} className=\"real-pointer\"></div>\n                        </div>\n\n                        <div ref={this.dotCon} key={3} className=\"dot-container\">\n                            {pointers.map((j, i) =>{\n                                return (\n                                    <div \n                                        onClick={this.pointTo.bind(this, i)}\n                                        style={{ transform: `rotateZ(${ baseDeg * (i)}deg)`}} \n                                        key={i} \n                                        className={classnames({'dot': true, 'big-dot': i % 9 === 0, 'highlight-dot': current >= i })}\n                                    >\n                                        <div className=\"dot-content\" />\n                                    </div>\n                                )\n                            })\n                            }\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Main;","import React from 'react';\nimport './App.css';\n\nimport Spin from './components/Spin'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      {/* <header className=\"App-header\" /> */}\n      <Spin />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}